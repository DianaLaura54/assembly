DATA SEGMENT PARA PUBLIC 'DATA'
	
	MESSAGE1 DB 'Introduce the number of elements (maximum is 20) : ','$'
	ARRAY DB 20 DUP(?)
	LEN DB ?
	readLEN DB 3,?,3 DUP(?)
	MESSAGE2 DB 0AH,0DH,'Introduce an element: ','$'
	readELEMENT DB 3,?,3 DUP(?)
	ELEMENT DB ?
	MESSAGE3 DB 0AH,0DH,'The sum of the elements is: ','$'
	SUM DB ?
	theSUM DB 2 DUP(?),'$'
	
DATA ENDS

PRINT MACRO MESSAGE
	MOV AH, 09H
	MOV DX, OFFSET MESSAGE
	INT 21H
ENDM PRINT

READ MACRO TEXT
	MOV AH, 0AH
	MOV DX, OFFSET TEXT
	INT 21H
ENDM READ

toNUMBER MACRO STRING,newNUMBER
LOCAL loop1
MOV CL,STRING[1]
MOV CH,0
MOV BL,10
MOV DI,2
MOV AX,0
MOV DL,0

loop1:
		SUB STRING[DI],'0'
		MOV DL,STRING[DI]
		MUL BL
		ADD AL,DL
		INC DI
		LOOP loop1
		
	MOV newNUMBER,AL
 
ENDM toNUMBER

toSTRING MACRO NR,newSTRING
LOCAL loop2

MOV AH,0
MOV AL,NR
MOV BL,10
MOV DI,1

loop2:
		DIV BL
		MOV newSTRING[DI],AH
		ADD newSTRING[DI],'0'
		DEC DI
		MOV AH,0
		CMP AL,0
		JNE loop2
ENDM toSTRING

CODE SEGMENT PARA PUBLIC 'CODE'
ASSUME DS:DATA,CS:CODE
START PROC FAR

	PUSH DS
	MOV AX,0
	PUSH AX
	MOV AX,DATA
	MOV DS,AX

; PRINT THE FIRST MESSAGE
	PRINT MESSAGE1

; INTRODUCE THE NUBMER OF ELEMENTS
	READ readLEN
	
; GET THE REAL LENGHT OF THE ARRAY
	toNUMBER readLEN,LEN
	
	MOV SI,0
	MOV BH,1 ; TO ITERATE THROUGH THE ARRAY
	
	loop3:
		; PRINT THE SECOND MESSAGE
		PRINT MESSAGE2
		
		; READ THE readELEMENT
		READ readELEMENT
	
		; GET THAT ELEMENT
		toNUMBER readELEMENT, ELEMENT
		
		MOV BL,ELEMENT
		MOV ARRAY[SI],BL
		
		CMP BH,LEN
		JE NEXT
		
		INC SI
		INC BH
		
		LOOP loop3
	
	NEXT:
		MOV CL,LEN
		MOV CH,0
		MOV DI,0
		MOV AL,0
		MOV AH,0
		
			loop4:
					MOV Al,ARRAY[DI]
					ADD Ah,Al
					INC DI
					LOOP loop4
	MOV SUM,Ah
	
	
; PRINT THE SUM
	PRINT MESSAGE3
	
	toSTRING SUM,theSUM
	
	PRINT theSUM
	
	MOV AH,4CH
	INT 21H

RET
START ENDP
CODE ENDS
END START